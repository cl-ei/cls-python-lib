---
layout: post
title: 学习C++之二：使用引用
category: 学习笔记
description: 使用C++中类似指针的一种功能
---
##什么是引用？
　　通俗来讲，引用是一个名称，它可以指作一个对象的别名。引用分为两种：lvalue引用和rvalue引用。

　　lvalue引用是一个变量的别名，它可以出现在一个赋值语句的左边，处于一个持久存储的位置。需要注意的是，lvalue引用是一个别名而不是指针，我们可以重新给指针赋值而使它（指针）指向另一个对象，但引用不可以这么做，我们不能修改它使其指向另一个对象。我们在声明引用时，就必须指出对应的变量，并且自始至终都不能改变。rvalue引用也作为变量的别名，但它也能引用rvalue，lvalue引用却不可以。

##使用lvalue引用
　　可以通过下列方式声明lvalue引用：

		long Sum(0L);
		long & refSum(sum);

　　上述第一句是使用函数表示法来声明一个初始值为0的长整形变量，在字面值后面附加“L”指明此值为long型变量，如不指定则默认为int型。如果不添加“L”后缀，则可能发生隐式的类型转换，即：int型的字面值转换为long型后再赋予Sum，显然，标准的用法可以避免某些危险的情况发生，因此建议添加后缀“L”。也有人写小写的“l”，虽然可以达到相同的效果，但它容易与数字1混淆。

　　第二句是声明一个可以替代原变量名“Sum”的引用，引用符“&”出现在类型名称“long”的后面、变量名refSum的前面，表明这是一个lvalue引用。现在，可以用refSum代替原来的变量名Sum。运行下面的程序：


		#include<iostream>
		using namespace std;

		void main(void)
		{
			long Sum(0L);
			long & refSum(Sum);

			refSum = 10;

			cout<<Sum
				<<endl;
		}

　　可以看到，程序输出结果“10”。与使用指针所不同的是，使用指针必须解除引用才能参与到表达式中，用来访问变量的是指针的地址，而lvalue引用完全等价于被引用的变量。

　　需要注意的是，如果这样定义：```int & refData = 10;```是不能通过编译的，因为字面值是常数而不能改变，为了保持常量值完整性，需要作出如下改变：```const int & refData = 10;```。这样，使用refData和使用字面值10可以达到相同的作用，但这意味着我们不能给refData重新赋值，因为它已经是一个常量。

##使用rvalue引用
　　使用两个引用符号“&&”来定义一个rvalue引用。运行下面程序：

		#include<iostream>
		using namespace std;

		void main(void)
		{
			long Sum(10L);

			long && refExp(2*Sum+3);			

			cout<<refExp
				<<endl;
		}
		
　　程序输出：23。这恰好是2*Sum+3的结果。这里虽然编译通过并执行，但实际上不是rvalue的引用方式，一般也不会这么用。这两种引用的主要用途是定义可能具有巨大值得函数，将在后面章节详细叙述。

